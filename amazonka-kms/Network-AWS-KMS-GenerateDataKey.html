<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.AWS.KMS.GenerateDataKey</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Network-AWS-KMS-GenerateDataKey.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">amazonka-kms-0.2.3: Amazon Key Management Service SDK.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Network.AWS.KMS.GenerateDataKey</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Request</a><ul><li><a href="#g:2">Request constructor</a></li><li><a href="#g:3">Request lenses</a></li></ul></li><li><a href="#g:4">Response</a><ul><li><a href="#g:5">Response constructor</a></li><li><a href="#g:6">Response lenses</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Generates a data key that you can use in your application to locally encrypt
 data. This call returns a plaintext version of the key in the <code>Plaintext</code> field
 of the response object and an encrypted copy of the key in the <code>CiphertextBlob</code>
 field. The key is encrypted by using the master key specified by the <code>KeyId</code>
 field. To decrypt the encrypted key, pass it to the <code>Decrypt</code> API.</p><p>We recommend that you use the following pattern to locally encrypt data:
 call the <code><a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></code> API, use the key returned in the <code>Plaintext</code> response
 field to locally encrypt data, and then erase the plaintext data key from
 memory. Store the encrypted data key (contained in the <code>CiphertextBlob</code> field)
 alongside of the locally encrypted data.</p><p>You should not call the <code>Encrypt</code> function to re-encrypt your data keys within
 a region. <code><a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></code> always returns the data key encrypted and tied to
 the customer master key that will be used to decrypt it. There is no need to
 decrypt it twice.  If you decide to use the optional <code>EncryptionContext</code>
 parameter, you must also store the context in full or at least store enough
 information along with the encrypted data to be able to reconstruct the
 context when submitting the ciphertext to the <code>Decrypt</code> API. It is a good
 practice to choose a context that you can reconstruct on the fly to better
 secure the ciphertext. For more information about how this parameter is used,
 see <a href="http://docs.aws.amazon.com/kms/latest/developerguide/encrypt-context.html">Encryption Context</a>.</p><p>To decrypt data, pass the encrypted data key to the <code>Decrypt</code> API. <code>Decrypt</code>
 uses the associated master key to decrypt the encrypted data key and returns
 it as plaintext. Use the plaintext data key to locally decrypt your data and
 then erase the key from memory. You must specify the encryption context, if
 any, that you specified when you generated the key. The encryption context is
 logged by CloudTrail, and you can use this log to help track the use of
 particular data.</p><p><a href="http://docs.aws.amazon.com/kms/latest/APIReference/API_GenerateDataKey.html">http://docs.aws.amazon.com/kms/latest/APIReference/API_GenerateDataKey.html</a></p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:GenerateDataKey">GenerateDataKey</a></li><li class="src short"><a href="#v:generateDataKey">generateDataKey</a> :: Text -&gt; <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></li><li class="src short"><a href="#v:gdkEncryptionContext">gdkEncryptionContext</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> (HashMap Text Text)</li><li class="src short"><a href="#v:gdkGrantTokens">gdkGrantTokens</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> [Text]</li><li class="src short"><a href="#v:gdkKeyId">gdkKeyId</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> Text</li><li class="src short"><a href="#v:gdkKeySpec">gdkKeySpec</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-AWS-KMS-Types.html#t:DataKeySpec">DataKeySpec</a>)</li><li class="src short"><a href="#v:gdkNumberOfBytes">gdkNumberOfBytes</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Natural)</li><li class="src short"><span class="keyword">data</span> <a href="#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a></li><li class="src short"><a href="#v:generateDataKeyResponse">generateDataKeyResponse</a> :: <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a></li><li class="src short"><a href="#v:gdkrCiphertextBlob">gdkrCiphertextBlob</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Base64)</li><li class="src short"><a href="#v:gdkrKeyId">gdkrKeyId</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Text)</li><li class="src short"><a href="#v:gdkrPlaintext">gdkrPlaintext</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Base64)</li></ul></div><div id="interface"><h1 id="g:1">Request</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:GenerateDataKey" class="def">GenerateDataKey</a></p><div class="subs instances"><p id="control.i:GenerateDataKey" class="caption collapser" onclick="toggleSection('i:GenerateDataKey')">Instances</p><div id="section.i:GenerateDataKey" class="show"><table><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Eq.html#t:Eq">Eq</a> <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Text-Read.html#t:Read">Read</a> <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Text-Show.html#t:Show">Show</a> <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">AWSRequest <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">ToQuery <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">ToPath <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">ToHeaders <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">ToJSON <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> Sv <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> = <a href="Network-AWS-KMS-Types.html#t:KMS">KMS</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> Rs <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> = <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:2">Request constructor</h2><div class="top"><p class="src"><a name="v:generateDataKey" class="def">generateDataKey</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Text</td><td class="doc"><p><code><a href="Network-AWS-KMS-GenerateDataKey.html#v:gdkKeyId">gdkKeyId</a></code></p></td></tr><tr><td class="src">-&gt; <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p><code><a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a></code> constructor.</p><p>The fields accessible through corresponding lenses are:</p><ul><li><code><a href="Network-AWS-KMS-GenerateDataKey.html#v:gdkEncryptionContext">gdkEncryptionContext</a></code> <code>::</code> <code>HashMap</code> <code>Text</code> <code>Text</code></li><li><code><a href="Network-AWS-KMS-GenerateDataKey.html#v:gdkGrantTokens">gdkGrantTokens</a></code> <code>::</code> [<code>Text</code>]</li><li><code><a href="Network-AWS-KMS-GenerateDataKey.html#v:gdkKeyId">gdkKeyId</a></code> <code>::</code> <code>Text</code></li><li><code><a href="Network-AWS-KMS-GenerateDataKey.html#v:gdkKeySpec">gdkKeySpec</a></code> <code>::</code> <code><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a></code> <code><a href="Network-AWS-KMS-Types.html#t:DataKeySpec">DataKeySpec</a></code></li><li><code><a href="Network-AWS-KMS-GenerateDataKey.html#v:gdkNumberOfBytes">gdkNumberOfBytes</a></code> <code>::</code> <code><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a></code> <code>Natural</code></li></ul></div></div><h2 id="g:3">Request lenses</h2><div class="top"><p class="src"><a name="v:gdkEncryptionContext" class="def">gdkEncryptionContext</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> (HashMap Text Text)</p><div class="doc"><p>Name/value pair that contains additional data to be authenticated during the
 encryption and decryption processes that use the key. This value is logged by
 AWS CloudTrail to provide context around the data encrypted by the key.</p></div></div><div class="top"><p class="src"><a name="v:gdkGrantTokens" class="def">gdkGrantTokens</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> [Text]</p><div class="doc"><p>For more information, see <a href="http://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#grant_token">Grant Tokens</a>.</p></div></div><div class="top"><p class="src"><a name="v:gdkKeyId" class="def">gdkKeyId</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> Text</p><div class="doc"><p>A unique identifier for the customer master key. This value can be a globally
 unique identifier, a fully specified ARN to either an alias or a key, or an
 alias name prefixed by &quot;alias/&quot;.  Key ARN Example -
 arn:aws:kms:us-east-1:123456789012:key<em>12345678-1234-1234-1234-123456789012 Alias ARN Example - arn:aws:kms:us-east-1:123456789012:</em>alias/MyAliasName
 Globally Unique Key ID Example - 12345678-1234-1234-123456789012 Alias Name
 Example - alias/MyAliasName</p></div></div><div class="top"><p class="src"><a name="v:gdkKeySpec" class="def">gdkKeySpec</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-AWS-KMS-Types.html#t:DataKeySpec">DataKeySpec</a>)</p><div class="doc"><p>Value that identifies the encryption algorithm and key size to generate a
 data key for. Currently this can be AES_128 or AES_256.</p></div></div><div class="top"><p class="src"><a name="v:gdkNumberOfBytes" class="def">gdkNumberOfBytes</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKey">GenerateDataKey</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Natural)</p><div class="doc"><p>Integer that contains the number of bytes to generate. Common values are 128,
 256, 512, and 1024. 1024 is the current limit. We recommend that you use the <code>KeySpec</code> parameter instead.</p></div></div><h1 id="g:4">Response</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:GenerateDataKeyResponse" class="def">GenerateDataKeyResponse</a></p><div class="subs instances"><p id="control.i:GenerateDataKeyResponse" class="caption collapser" onclick="toggleSection('i:GenerateDataKeyResponse')">Instances</p><div id="section.i:GenerateDataKeyResponse" class="show"><table><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Eq.html#t:Eq">Eq</a> <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Text-Read.html#t:Read">Read</a> <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Text-Show.html#t:Show">Show</a> <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">FromJSON <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:5">Response constructor</h2><div class="top"><p class="src"><a name="v:generateDataKeyResponse" class="def">generateDataKeyResponse</a> :: <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a></p><div class="doc"><p><code><a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a></code> constructor.</p><p>The fields accessible through corresponding lenses are:</p><ul><li><code><a href="Network-AWS-KMS-GenerateDataKey.html#v:gdkrCiphertextBlob">gdkrCiphertextBlob</a></code> <code>::</code> <code><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a></code> <code>Base64</code></li><li><code><a href="Network-AWS-KMS-GenerateDataKey.html#v:gdkrKeyId">gdkrKeyId</a></code> <code>::</code> <code><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a></code> <code>Text</code></li><li><code><a href="Network-AWS-KMS-GenerateDataKey.html#v:gdkrPlaintext">gdkrPlaintext</a></code> <code>::</code> <code><a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a></code> <code>Base64</code></li></ul></div></div><h2 id="g:6">Response lenses</h2><div class="top"><p class="src"><a name="v:gdkrCiphertextBlob" class="def">gdkrCiphertextBlob</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Base64)</p><div class="doc"><p>Ciphertext that contains the encrypted data key. You must store the blob and
 enough information to reconstruct the encryption context so that the data
 encrypted by using the key can later be decrypted. You must provide both the
 ciphertext blob and the encryption context to the <code>Decrypt</code> API to recover the
 plaintext data key and decrypt the object.</p><p>If you are using the CLI, the value is Base64 encoded. Otherwise, it is not
 encoded.</p></div></div><div class="top"><p class="src"><a name="v:gdkrKeyId" class="def">gdkrKeyId</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Text)</p><div class="doc"><p>System generated unique identifier of the key to be used to decrypt the
 encrypted copy of the data key.</p></div></div><div class="top"><p class="src"><a name="v:gdkrPlaintext" class="def">gdkrPlaintext</a> :: Lens' <a href="Network-AWS-KMS-GenerateDataKey.html#t:GenerateDataKeyResponse">GenerateDataKeyResponse</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.7.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Base64)</p><div class="doc"><p>Plaintext that contains the data key. Use this for encryption and decryption
 and then remove it from memory as soon as possible.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>